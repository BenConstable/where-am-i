!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.WhereAmI=e()}}(function(){return function e(i,a,n){function o(s,t){if(!a[s]){if(!i[s]){var m="function"==typeof require&&require;if(!t&&m)return m(s,!0);if(r)return r(s,!0);var g=new Error("Cannot find module '"+s+"'");throw g.code="MODULE_NOT_FOUND",g}var c=a[s]={exports:{}};i[s][0].call(c.exports,function(e){var a=i[s][1][e];return o(a?a:e)},c,c.exports,e,i,a,n)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,i,a){function n(e,i){this.locator="undefined"==typeof e?o.fetchDefault():o.fetch(e),this.storage="undefined"==typeof i?r.fetchDefault():r.fetch(i)}var o=e("./locators/manager"),r=e("./storage/manager");n.prototype.findMe=function(e,i,a){if("undefined"==typeof a&&(a=!0),a&&this.storage.hasLocated())e(this.storage.getPlace());else{var n=this;this.locator.locate(function(i){e(n.storage.putPlace(i))},function(e){i(e)})}},n.addStorageAdapter=function(e,i){return r.register(e,i),this},n.addLocatorAdapter=function(e,i){return o.register(e,i),this},i.exports=n},{"./locators/manager":4,"./storage/manager":7}],2:[function(e,i,a){i.exports=[{iso:"AF",name:"Afghanistan",region:"Asia"},{iso:"AX",name:"Åland Islands",region:"Europe"},{iso:"AL",name:"Albania",region:"Europe"},{iso:"DZ",name:"Algeria",region:"Africa"},{iso:"AS",name:"American Samoa",region:"Oceania"},{iso:"AD",name:"Andorra",region:"Europe"},{iso:"AO",name:"Angola",region:"Africa"},{iso:"AI",name:"Anguilla",region:"North America"},{iso:"AQ",name:"Antarctica",region:"Antarctica"},{iso:"AG",name:"Antigua and Barbuda",region:"North America"},{iso:"AR",name:"Argentina",region:"South America"},{iso:"AM",name:"Armenia",region:"Asia"},{iso:"AW",name:"Aruba",region:"North America"},{iso:"AU",name:"Australia",region:"Oceania"},{iso:"AT",name:"Austria",region:"Europe"},{iso:"AZ",name:"Azerbaijan",region:"Asia"},{iso:"BS",name:"Bahamas",region:"North America"},{iso:"BH",name:"Bahrain",region:"Asia"},{iso:"BD",name:"Bangladesh",region:"Asia"},{iso:"BB",name:"Barbados",region:"North America"},{iso:"BY",name:"Belarus",region:"Europe"},{iso:"BE",name:"Belgium",region:"Europe"},{iso:"BZ",name:"Belize",region:"North America"},{iso:"BJ",name:"Benin",region:"Africa"},{iso:"BM",name:"Bermuda",region:"North America"},{iso:"BT",name:"Bhutan",region:"Asia"},{iso:"BO",name:"Bolivia",region:"South America"},{iso:"BQ",name:"Bonaire, Sint Eustatius, and Saba",region:"North America"},{iso:"BA",name:"Bosnia and Herzegovina",region:"Europe"},{iso:"BW",name:"Botswana",region:"Africa"},{iso:"BV",name:"Bouvet Island",region:"Antarctica"},{iso:"BR",name:"Brazil",region:"South America"},{iso:"IO",name:"British Indian Ocean Territory",region:"Asia"},{iso:"VG",name:"British Virgin Islands",region:"North America"},{iso:"BN",name:"Brunei",region:"Asia"},{iso:"BG",name:"Bulgaria",region:"Europe"},{iso:"BF",name:"Burkina Faso",region:"Africa"},{iso:"BI",name:"Burundi",region:"Africa"},{iso:"KH",name:"Cambodia",region:"Asia"},{iso:"CM",name:"Cameroon",region:"Africa"},{iso:"CA",name:"Canada",region:"North America"},{iso:"CV",name:"Cape Verde",region:"Africa"},{iso:"KY",name:"Cayman Islands",region:"North America"},{iso:"CF",name:"Central African Republic",region:"Africa"},{iso:"TD",name:"Chad",region:"Africa"},{iso:"CL",name:"Chile",region:"South America"},{iso:"CN",name:"China",region:"Asia"},{iso:"CX",name:"Christmas Island",region:"Asia"},{iso:"CC",name:"Cocos [Keeling] Islands",region:"Asia"},{iso:"CO",name:"Colombia",region:"South America"},{iso:"KM",name:"Comoros",region:"Africa"},{iso:"CG",name:"Congo - Brazzaville",region:"Africa"},{iso:"CD",name:"Congo - Kinshasa",region:"Africa"},{iso:"CK",name:"Cook Islands",region:"Oceania"},{iso:"CR",name:"Costa Rica",region:"North America"},{iso:"CI",name:"Côte d’Ivoire",region:"Africa"},{iso:"HR",name:"Croatia",region:"Europe"},{iso:"CU",name:"Cuba",region:"North America"},{iso:"CW",name:"Curaçao",region:"South America"},{iso:"CY",name:"Cyprus",region:"Asia"},{iso:"CZ",name:"Czech Republic",region:"Europe"},{iso:"DK",name:"Denmark",region:"Europe"},{iso:"DJ",name:"Djibouti",region:"Africa"},{iso:"DM",name:"Dominica",region:"North America"},{iso:"DO",name:"Dominican Republic",region:"North America"},{iso:"EC",name:"Ecuador",region:"South America"},{iso:"EG",name:"Egypt",region:"Africa"},{iso:"SV",name:"El Salvador",region:"North America"},{iso:"GQ",name:"Equatorial Guinea",region:"Africa"},{iso:"ER",name:"Eritrea",region:"Africa"},{iso:"EE",name:"Estonia",region:"Europe"},{iso:"ET",name:"Ethiopia",region:"Africa"},{iso:"EU",name:"European Union",region:"Europe"},{iso:"FK",name:"Falkland Islands",region:"South America"},{iso:"FO",name:"Faroe Islands",region:"Europe"},{iso:"FJ",name:"Fiji",region:"Oceania"},{iso:"FI",name:"Finland",region:"Europe"},{iso:"FR",name:"France",region:"Europe"},{iso:"GF",name:"French Guiana",region:"South America"},{iso:"PF",name:"French Polynesia",region:"Oceania"},{iso:"TF",name:"French Southern Territories",region:"Antarctica"},{iso:"GA",name:"Gabon",region:"Africa"},{iso:"GM",name:"Gambia",region:"Africa"},{iso:"GE",name:"Georgia",region:"Asia"},{iso:"DE",name:"Germany",region:"Europe"},{iso:"GH",name:"Ghana",region:"Africa"},{iso:"GI",name:"Gibraltar",region:"Europe"},{iso:"GR",name:"Greece",region:"Europe"},{iso:"GL",name:"Greenland",region:"North America"},{iso:"GD",name:"Grenada",region:"North America"},{iso:"GP",name:"Guadeloupe",region:"North America"},{iso:"GU",name:"Guam",region:"Oceania"},{iso:"GT",name:"Guatemala",region:"North America"},{iso:"GG",name:"Guernsey",region:"Europe"},{iso:"GN",name:"Guinea",region:"Africa"},{iso:"GW",name:"Guinea-Bissau",region:"Africa"},{iso:"GY",name:"Guyana",region:"South America"},{iso:"HT",name:"Haiti",region:"North America"},{iso:"HM",name:"Heard Island and McDonald Islands",region:"Antarctica"},{iso:"HN",name:"Honduras",region:"North America"},{iso:"HK",name:"Hong Kong SAR China",region:"Asia"},{iso:"HU",name:"Hungary",region:"Europe"},{iso:"IS",name:"Iceland",region:"Europe"},{iso:"IN",name:"India",region:"Asia"},{iso:"ID",name:"Indonesia",region:"Asia"},{iso:"IR",name:"Iran",region:"Asia"},{iso:"IQ",name:"Iraq",region:"Asia"},{iso:"IE",name:"Ireland",region:"Europe"},{iso:"IM",name:"Isle of Man",region:"Europe"},{iso:"IL",name:"Israel",region:"Asia"},{iso:"IT",name:"Italy",region:"Europe"},{iso:"JM",name:"Jamaica",region:"North America"},{iso:"JP",name:"Japan",region:"Asia"},{iso:"JE",name:"Jersey",region:"Europe"},{iso:"JO",name:"Jordan",region:"Asia"},{iso:"KZ",name:"Kazakhstan",region:"Asia"},{iso:"KE",name:"Kenya",region:"Africa"},{iso:"KI",name:"Kiribati",region:"Oceania"},{iso:"KW",name:"Kuwait",region:"Asia"},{iso:"KG",name:"Kyrgyzstan",region:"Asia"},{iso:"LA",name:"Laos",region:"Asia"},{iso:"LV",name:"Latvia",region:"Europe"},{iso:"LB",name:"Lebanon",region:"Asia"},{iso:"LS",name:"Lesotho",region:"Africa"},{iso:"LR",name:"Liberia",region:"Africa"},{iso:"LY",name:"Libya",region:"Africa"},{iso:"LI",name:"Liechtenstein",region:"Europe"},{iso:"LT",name:"Lithuania",region:"Europe"},{iso:"LU",name:"Luxembourg",region:"Europe"},{iso:"MO",name:"Macau SAR China",region:"Asia"},{iso:"MK",name:"Macedonia",region:"Europe"},{iso:"MG",name:"Madagascar",region:"Africa"},{iso:"MW",name:"Malawi",region:"Africa"},{iso:"MY",name:"Malaysia",region:"Asia"},{iso:"MV",name:"Maldives",region:"Asia"},{iso:"ML",name:"Mali",region:"Africa"},{iso:"MT",name:"Malta",region:"Europe"},{iso:"MH",name:"Marshall Islands",region:"Oceania"},{iso:"MQ",name:"Martinique",region:"North America"},{iso:"MR",name:"Mauritania",region:"Africa"},{iso:"MU",name:"Mauritius",region:"Africa"},{iso:"YT",name:"Mayotte",region:"Africa"},{iso:"MX",name:"Mexico",region:"North America"},{iso:"FM",name:"Micronesia",region:"Oceania"},{iso:"MD",name:"Moldova",region:"Europe"},{iso:"MC",name:"Monaco",region:"Europe"},{iso:"MN",name:"Mongolia",region:"Asia"},{iso:"ME",name:"Montenegro",region:"Europe"},{iso:"MS",name:"Montserrat",region:"North America"},{iso:"MA",name:"Morocco",region:"Africa"},{iso:"MZ",name:"Mozambique",region:"Africa"},{iso:"MM",name:"Myanmar [Burma]",region:"Asia"},{iso:"NA",name:"Namibia",region:"Africa"},{iso:"NR",name:"Nauru",region:"Oceania"},{iso:"NP",name:"Nepal",region:"Asia"},{iso:"NL",name:"Netherlands",region:"Europe"},{iso:"AN",name:"Netherlands Antilles",region:"North America"},{iso:"NC",name:"New Caledonia",region:"Oceania"},{iso:"NZ",name:"New Zealand",region:"Oceania"},{iso:"NI",name:"Nicaragua",region:"North America"},{iso:"NE",name:"Niger",region:"Africa"},{iso:"NG",name:"Nigeria",region:"Africa"},{iso:"NU",name:"Niue",region:"Oceania"},{iso:"NF",name:"Norfolk Island",region:"Oceania"},{iso:"KP",name:"North Korea",region:"Asia"},{iso:"MP",name:"Northern Mariana Islands",region:"Oceania"},{iso:"NO",name:"Norway",region:"Europe"},{iso:"OM",name:"Oman",region:"Asia"},{iso:"PK",name:"Pakistan",region:"Asia"},{iso:"PW",name:"Palau",region:"Oceania"},{iso:"PS",name:"Palestinian Territories",region:"Asia"},{iso:"PA",name:"Panama",region:"North America"},{iso:"PG",name:"Papua New Guinea",region:"Oceania"},{iso:"PY",name:"Paraguay",region:"South America"},{iso:"PE",name:"Peru",region:"South America"},{iso:"PH",name:"Philippines",region:"Asia"},{iso:"PN",name:"Pitcairn Islands",region:"Oceania"},{iso:"PL",name:"Poland",region:"Europe"},{iso:"PT",name:"Portugal",region:"Europe"},{iso:"PR",name:"Puerto Rico",region:"North America"},{iso:"QA",name:"Qatar",region:"Asia"},{iso:"RE",name:"Réunion",region:"Africa"},{iso:"RO",name:"Romania",region:"Europe"},{iso:"RU",name:"Russia",region:"Europe"},{iso:"RW",name:"Rwanda",region:"Africa"},{iso:"BL",name:"Saint Barthélemy",region:"North America"},{iso:"SH",name:"Saint Helena",region:"Africa"},{iso:"KN",name:"Saint Kitts and Nevis",region:"North America"},{iso:"LC",name:"Saint Lucia",region:"North America"},{iso:"MF",name:"Saint Martin",region:"North America"},{iso:"PM",name:"Saint Pierre and Miquelon",region:"North America"},{iso:"VC",name:"Saint Vincent and the Grenadines",region:"North America"},{iso:"WS",name:"Samoa",region:"Oceania"},{iso:"SM",name:"San Marino",region:"Europe"},{iso:"ST",name:"São Tomé and Príncipe",region:"Africa"},{iso:"SA",name:"Saudi Arabia",region:"Asia"},{iso:"SN",name:"Senegal",region:"Africa"},{iso:"RS",name:"Serbia",region:"Europe"},{iso:"SC",name:"Seychelles",region:"Africa"},{iso:"SL",name:"Sierra Leone",region:"Africa"},{iso:"SG",name:"Singapore",region:"Asia"},{iso:"SX",name:"Sint Maarten",region:"North America"},{iso:"SK",name:"Slovakia",region:"Europe"},{iso:"SI",name:"Slovenia",region:"Europe"},{iso:"SB",name:"Solomon Islands",region:"Oceania"},{iso:"SO",name:"Somalia",region:"Africa"},{iso:"ZA",name:"South Africa",region:"Africa"},{iso:"GS",name:"South Georgia and the South Sandwich Islands",region:"Antarctica"},{iso:"KR",name:"South Korea",region:"Asia"},{iso:"SS",name:"South Sudan",region:"Africa"},{iso:"ES",name:"Spain",region:"Europe"},{iso:"LK",name:"Sri Lanka",region:"Asia"},{iso:"SD",name:"Sudan",region:"Africa"},{iso:"SR",name:"Suriname",region:"South America"},{iso:"SJ",name:"Svalbard and Jan Mayen",region:"Europe"},{iso:"SZ",name:"Swaziland",region:"Africa"},{iso:"SE",name:"Sweden",region:"Europe"},{iso:"CH",name:"Switzerland",region:"Europe"},{iso:"SY",name:"Syria",region:"Asia"},{iso:"TW",name:"Taiwan",region:"Asia"},{iso:"TJ",name:"Tajikistan",region:"Asia"},{iso:"TZ",name:"Tanzania",region:"Africa"},{iso:"TH",name:"Thailand",region:"Asia"},{iso:"TL",name:"Timor-Leste",region:"Asia"},{iso:"TG",name:"Togo",region:"Africa"},{iso:"TK",name:"Tokelau",region:"Oceania"},{iso:"TO",name:"Tonga",region:"Oceania"},{iso:"TT",name:"Trinidad and Tobago",region:"North America"},{iso:"TA",name:"Tristan da Cunha",region:"Africa"},{iso:"TN",name:"Tunisia",region:"Africa"},{iso:"TR",name:"Turkey",region:"Europe"},{iso:"TM",name:"Turkmenistan",region:"Asia"},{iso:"TC",name:"Turks and Caicos Islands",region:"North America"},{iso:"TV",name:"Tuvalu",region:"Oceania"},{iso:"UM",name:"U.S. Minor Outlying Islands",region:"Oceania"},{iso:"VI",name:"U.S. Virgin Islands",region:"North America"},{iso:"UG",name:"Uganda",region:"Africa"},{iso:"UA",name:"Ukraine",region:"Europe"},{iso:"AE",name:"United Arab Emirates",region:"Asia"},{iso:"GB",name:"United Kingdom",region:"Europe"},{iso:"US",name:"United States",region:"North America"},{iso:"UY",name:"Uruguay",region:"South America"},{iso:"UZ",name:"Uzbekistan",region:"Asia"},{iso:"VU",name:"Vanuatu",region:"Oceania"},{iso:"VA",name:"Vatican City",region:"Europe"},{iso:"VE",name:"Venezuela",region:"South America"},{iso:"VN",name:"Vietnam",region:"Asia"},{iso:"WF",name:"Wallis and Futuna",region:"Oceania"},{iso:"EH",name:"Western Sahara",region:"Africa"},{iso:"YE",name:"Yemen",region:"Asia"},{iso:"ZM",name:"Zambia",region:"Africa"},{iso:"ZW",name:"Zimbabwe",region:"Africa"}]},{}],3:[function(e,i,a){function n(){}var o=e("../util/request"),r=e("../place");n.prototype.locate=function(e,i){var a=new o("//freegeoip.net/json"),n=this;a.send(function(i){e(n.createPlace(i))},function(e){i(e)})},n.prototype.createPlace=function(e){return new r({lat:e.latitude,lng:e.longitude,iso:e.country_code})},i.exports=n},{"../place":5,"../util/request":11}],4:[function(e,i,a){var n=e("./free-geo-ip"),o=e("../util/manager"),r=new o;r.register("freegeoip",new n).setDefault("freegeoip"),i.exports=r},{"../util/manager":10,"./free-geo-ip":3}],5:[function(e,i,a){function n(e){this.lat=e.lat,this.lng=e.lng,this.country="undefined"!=typeof e.iso?o[e.iso]:e.country}var o=e("./util/country-data").countries,r=e("./util/country-data").regions,s=e("./util/uppercase");n.prototype.inCountry=function(e){return e instanceof Array||(e=[e]),-1!==e.indexOf(this.country.iso)},n.prototype.inRegion=function(e){e instanceof Array||(e=[e]);for(var i=0;i<e.length;i++){var a=s(e[i]);if("undefined"!=typeof r[a]&&-1!==r[a].indexOf(this.country.iso))return!0}return!1},i.exports=n},{"./util/country-data":9,"./util/uppercase":12}],6:[function(e,i,a){function n(){this.key="where_am_i_place"}var o=e("../place");n.prototype.hasLocated=function(){return null!==localStorage.getItem(this.key)},n.prototype.putPlace=function(e){return localStorage.setItem(this.key,JSON.stringify(e)),e},n.prototype.getPlace=function(){return new o(JSON.parse(localStorage.getItem(this.key)))},i.exports=n},{"../place":5}],7:[function(e,i,a){var n=e("./var-storage-adapter"),o=e("./local-storage-adapter"),r=e("../util/manager"),s=new r;s.register("variable",new n).register("localstorage",new o).setDefault("localstorage"),i.exports=s},{"../util/manager":10,"./local-storage-adapter":6,"./var-storage-adapter":8}],8:[function(e,i,a){function n(){this.place=null}n.prototype.hasLocated=function(){return null!==this.place},n.prototype.putPlace=function(e){return this.place=e,this.place},n.prototype.getPlace=function(){return this.place},i.exports=n},{}],9:[function(e,i,a){function n(e){this.source=e}var o=e("../../data/countries.json"),r=e("./uppercase");n.prototype.countriesByCode=function(){for(var e={},i=0;i<this.source.length;i++){var a=this.source[i];e[a.iso]=a}return e},n.prototype.countryCodesByRegion=function(){for(var e={},i=0;i<this.source.length;i++){var a=this.source[i],n=r(a.region);"undefined"==typeof e[n]&&(e[n]=[]),e[n].push(a.iso)}return e};var s=new n(o);i.exports={countries:s.countriesByCode(),regions:s.countryCodesByRegion()}},{"../../data/countries.json":2,"./uppercase":12}],10:[function(e,i,a){function n(){this.services={},this.defaultService=null}n.prototype.register=function(e,i){return this.services[e]=i,this},n.prototype.fetch=function(e){if("undefined"!=typeof this.services[e])return this.services[e];throw new Error("Service "+e+" is not registered")},n.prototype.fetchDefault=function(){if(null!==this.defaultService)return this.fetch(this.defaultService);throw new Error("Default service not set")},n.prototype.setDefault=function(e){if("undefined"!=typeof this.services[e])return this.defaultService=e,this;throw new Error("Service "+e+" is not registered")},i.exports=n},{}],11:[function(e,i,a){function n(e,i){this.url=e,this.method="undefined"!=typeof i?i.method||"GET":"GET"}n.prototype.send=function(e,i){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){var n=JSON.parse(a.responseText);200===a.status?e(n,a.status):i(n,a.status)}},a.open(this.method,this.url,!0),a.send()},i.exports=n},{}],12:[function(e,i,a){function n(e){return e.replace(/ /g,"").toUpperCase()}i.exports=n},{}]},{},[1])(1)});